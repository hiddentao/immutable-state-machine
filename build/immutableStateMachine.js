"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():!function(){var a=e(),o=t.ImmutableStateMachine;a.noConflict=function(){return t.ImmutableStateMachine=o,a},t.ImmutableStateMachine=a}()}(void 0,function(){var t=function(t){var e={};return t.forEach(function(t){e[t]=t}),e},e=null,a=function(t){this._setupStates(t)};return a.prototype.getState=function(){return this._activeState},a.prototype.getData=function(){return this._states[this._activeState].data},a.prototype["goto"]=function(t){var a=arguments.length<=1||void 0===arguments[1]?e:arguments[1];if(t===this._activeState)return this._states[this._activeState].data!==a?this._new(t,a):this;if(!this._states[t])throw new Error("Invalid state: "+t);var o=this._states[this._activeState],n=this._states[t];if(o.to&&!o.to[t]||n.from&&!n.from[this._activeState])throw new Error("Disallowed transition: "+this._activeState+" -> "+t);return this._new(t,a)},a.prototype._setupStates=function(a){var o=this;if(!(a instanceof Array)||2>a.length)throw new Error("Atleast 2 states required");this._states={},a.forEach(function(a){var n=a.id||a;if(o._states[n])throw new Error("State already defined: "+n);o._states[n]={data:e},a.from&&(o._states[n].from=t(a.from)),a.to&&(o._states[n].to=t(a.to)),(!o._activeState||a.initial)&&(o._activeState=n)})},a.prototype._new=function(t,e){var o=Object.create(a.prototype);return o._states=JSON.parse(JSON.stringify(this._states)),o._activeState=t,o._states[o._activeState].data=e,o},a});